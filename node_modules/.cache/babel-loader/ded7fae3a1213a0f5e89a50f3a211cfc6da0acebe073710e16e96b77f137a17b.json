{"ast":null,"code":"var _jsxFileName = \"/Users/ayakos/Documents/dev/chillax-top/calm-composer/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Volume2, RefreshCw, Play, Pause, Save, Upload } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CalmComposer = () => {\n  _s();\n  // グリッドの設定\n  const [gridSize, setGridSize] = useState({\n    rows: 13,\n    cols: 16\n  });\n  const [grid, setGrid] = useState([]);\n  const [selectedInstrument, setSelectedInstrument] = useState('synth');\n  const [volume, setVolume] = useState(0.5);\n\n  // 再生関連の状態\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1.0);\n  const [currentColumn, setCurrentColumn] = useState(-1);\n  const playbackRef = useRef(null);\n\n  // マウスの状態を追跡\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [isAddMode, setIsAddMode] = useState(true); // マウスダウン時の最初のセルの状態で追加か削除かを決定\n  const [lastCell, setLastCell] = useState({\n    row: -1,\n    col: -1\n  });\n\n  // 音楽再生用の参照\n  const audioContextRef = useRef(null);\n\n  // スケールの設定（ペンタトニックスケール - リラクゼーション向き）\n  const pentatonicScale = [523.25,\n  // C5\n  587.33,\n  // D5\n  659.25,\n  // E5\n  783.99,\n  // G5\n  880.00,\n  // A5\n  1046.50,\n  // C6\n  1174.66,\n  // D6\n  1318.51,\n  // E6\n  1567.98,\n  // G6\n  1760.00,\n  // A6\n  2093.00,\n  // C7\n  2349.32,\n  // D7\n  2637.02 // E7\n  ].reverse(); // 上から下へ表示するために反転\n\n  // 色のパレット（リラックス効果のある色合い）\n  const colors = {\n    background: 'bg-gradient-to-r from-blue-50 to-purple-50',\n    gridBackground: 'bg-white',\n    hoveredCell: 'bg-indigo-200',\n    playbackIndicator: 'bg-blue-200 opacity-30',\n    controls: 'bg-white',\n    button: 'bg-indigo-500 hover:bg-indigo-600 text-white',\n    buttonSecondary: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\n    playButton: 'bg-green-500 hover:bg-green-600 text-white',\n    pauseButton: 'bg-amber-500 hover:bg-amber-600 text-white'\n  };\n\n  // 楽器の音色設定と色\n  const instruments = [{\n    id: 'synth',\n    name: 'シンセ',\n    type: 'sine',\n    color: 'bg-indigo-400',\n    dotColor: 'bg-white'\n  }, {\n    id: 'bell',\n    name: 'ベル',\n    type: 'triangle',\n    color: 'bg-teal-400',\n    dotColor: 'bg-white'\n  }, {\n    id: 'soft',\n    name: 'ソフト',\n    type: 'sine',\n    color: 'bg-purple-400',\n    dotColor: 'bg-white'\n  }, {\n    id: 'warm',\n    name: '温かみ',\n    type: 'sine',\n    color: 'bg-amber-400',\n    dotColor: 'bg-white'\n  }];\n\n  // 背景パターン\n  const backgroundPatterns = [{\n    id: 'waves',\n    name: '波',\n    className: 'from-blue-50 to-purple-50'\n  }, {\n    id: 'sunset',\n    name: '夕暮れ',\n    className: 'from-orange-50 to-pink-50'\n  }, {\n    id: 'forest',\n    name: '森',\n    className: 'from-green-50 to-teal-50'\n  }, {\n    id: 'night',\n    name: '夜',\n    className: 'from-indigo-50 to-purple-100'\n  }];\n  const [currentPattern, setCurrentPattern] = useState(backgroundPatterns[0]);\n\n  // グリッドの初期化\n  useEffect(() => {\n    // 初期グリッドを作成（すべてのセルをfalseに）\n    const newGrid = Array(gridSize.rows).fill().map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n\n    // Web Audio APIのセットアップ\n    audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n    return () => {\n      // クリーンアップ\n      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n        audioContextRef.current.close();\n      }\n    };\n  }, []);\n\n  // グローバルなマウスイベントの設定\n  useEffect(() => {\n    const handleGlobalMouseUp = () => {\n      setIsMouseDown(false);\n      setLastCell({\n        row: -1,\n        col: -1\n      });\n    };\n    window.addEventListener('mouseup', handleGlobalMouseUp);\n    window.addEventListener('mouseleave', handleGlobalMouseUp);\n    return () => {\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\n      window.removeEventListener('mouseleave', handleGlobalMouseUp);\n    };\n  }, []);\n\n  // 再生機能の管理\n  useEffect(() => {\n    if (isPlaying) {\n      // 再生開始\n      let column = currentColumn < 0 ? 0 : currentColumn;\n      const playColumn = () => {\n        // 現在の列のアクティブなセルを鳴らす\n        for (let row = 0; row < gridSize.rows; row++) {\n          if (grid[row][column]) {\n            playNote(row);\n          }\n        }\n\n        // 次の列に進む\n        column = (column + 1) % gridSize.cols;\n        setCurrentColumn(column);\n      };\n\n      // 再生速度に応じた間隔でタイマーをセット\n      const speed = 300 / playbackSpeed; // ベース速度を300ミリ秒に設定\n      playbackRef.current = setInterval(playColumn, speed);\n      return () => {\n        clearInterval(playbackRef.current);\n      };\n    } else {\n      // 再生終了時の処理\n      if (playbackRef.current) {\n        clearInterval(playbackRef.current);\n      }\n    }\n  }, [isPlaying, grid, playbackSpeed]);\n\n  // マウスダウンの処理\n  const handleMouseDown = (row, col) => {\n    // Safariのための対応\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    setIsMouseDown(true);\n    setLastCell({\n      row,\n      col\n    });\n\n    // 現在のセルの状態に基づいて、追加モードか削除モードかを設定\n    const cellValue = grid[row][col];\n    setIsAddMode(!cellValue);\n\n    // セルの状態を更新\n    const newGrid = [...grid];\n    newGrid[row][col] = !cellValue;\n    setGrid(newGrid);\n\n    // 追加モードのときのみ音を鳴らす\n    if (!cellValue) {\n      playNote(row);\n    }\n  };\n\n  // マウスオーバーの処理（ドラッグ時）\n  const handleMouseOver = (row, col) => {\n    if (!isMouseDown || lastCell.row === row && lastCell.col === col) {\n      return;\n    }\n    setLastCell({\n      row,\n      col\n    });\n    const newGrid = [...grid];\n    // 追加モードか削除モードかに基づいてセルを更新\n    newGrid[row][col] = isAddMode;\n    setGrid(newGrid);\n\n    // 追加モードのときのみ音を鳴らす\n    if (isAddMode) {\n      playNote(row);\n    }\n  };\n\n  // 音を鳴らす関数\n  const playNote = (row, time = audioContextRef.current.currentTime) => {\n    if (!audioContextRef.current) return;\n    const oscillator = audioContextRef.current.createOscillator();\n    const gainNode = audioContextRef.current.createGain();\n\n    // 楽器タイプに基づいた設定\n    let instrumentSettings;\n    switch (selectedInstrument) {\n      case 'bell':\n        oscillator.type = 'triangle';\n        // ベル風の音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.01, time + 1.5);\n        break;\n      case 'soft':\n        oscillator.type = 'sine';\n        // ソフトな音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume * 0.7, time + 0.1);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 2.0);\n        break;\n      case 'warm':\n        oscillator.type = 'sine';\n        // 温かみのある音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume, time + 0.05);\n        gainNode.gain.exponentialRampToValueAtTime(volume * 0.6, time + 0.2);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.8);\n\n        // 温かみを出すために倍音を追加\n        const harmonicOsc = audioContextRef.current.createOscillator();\n        const harmonicGain = audioContextRef.current.createGain();\n        harmonicOsc.frequency.setValueAtTime(pentatonicScale[row] * 2, time);\n        harmonicGain.gain.setValueAtTime(volume * 0.2, time);\n        harmonicGain.gain.exponentialRampToValueAtTime(0.001, time + 1.5);\n        harmonicOsc.connect(harmonicGain);\n        harmonicGain.connect(audioContextRef.current.destination);\n        harmonicOsc.start(time);\n        harmonicOsc.stop(time + 1.8);\n        break;\n      default:\n        // synth\n        oscillator.type = 'sine';\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.0);\n    }\n    oscillator.frequency.setValueAtTime(pentatonicScale[row], time);\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContextRef.current.destination);\n    oscillator.start(time);\n    oscillator.stop(time + 2.0); // 2秒後に音を止める\n  };\n\n  // グリッドをクリア\n  const clearGrid = () => {\n    const newGrid = Array(gridSize.rows).fill().map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n\n  // ランダムなパターンを生成（リラクゼーション向きのパターン）\n  const generateRandomPattern = () => {\n    const newGrid = Array(gridSize.rows).fill().map(() => Array(gridSize.cols).fill(false));\n\n    // 適度な密度でランダムに配置（約15%のセルをアクティブに）\n    for (let col = 0; col < gridSize.cols; col++) {\n      // 各列に1〜3個の音符を配置\n      const notesInColumn = Math.floor(Math.random() * 3) + 1;\n      for (let i = 0; i < notesInColumn; i++) {\n        // リラクゼーション向きにするため、低音と高音を避けて中音域を多めに\n        let row;\n        if (Math.random() < 0.7) {\n          // 70%の確率で中音域（4-9）\n          row = Math.floor(Math.random() * 6) + 4;\n        } else {\n          // 30%の確率で全域\n          row = Math.floor(Math.random() * gridSize.rows);\n        }\n        newGrid[row][col] = true;\n      }\n    }\n    setGrid(newGrid);\n  };\n\n  // 再生/停止の切り替え\n  const togglePlayback = () => {\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    setIsPlaying(!isPlaying);\n  };\n\n  // 再生を停止し、先頭に戻る\n  const stopPlayback = () => {\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n\n  // 背景パターンの変更\n  const changeBackgroundPattern = pattern => {\n    setCurrentPattern(pattern);\n  };\n\n  // コンポジションの保存\n  const saveComposition = () => {\n    try {\n      // コンポジションデータの作成\n      const compositionData = {\n        grid,\n        instrument: selectedInstrument,\n        background: currentPattern.id,\n        version: '1.1'\n      };\n\n      // JSON形式で保存\n      const jsonData = JSON.stringify(compositionData);\n      const blob = new Blob([jsonData], {\n        type: 'application/json'\n      });\n      const url = URL.createObjectURL(blob);\n\n      // ダウンロードリンクの作成と実行\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `calm-composition-${new Date().toISOString().slice(0, 10)}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      alert('コンポジションを保存しました！');\n    } catch (e) {\n      console.error('保存エラー:', e);\n      alert('保存に失敗しました。');\n    }\n  };\n\n  // コンポジションのロード\n  const loadComposition = event => {\n    try {\n      const file = event.target.files[0];\n      if (!file) return;\n      const reader = new FileReader();\n      reader.onload = e => {\n        try {\n          const compositionData = JSON.parse(e.target.result);\n\n          // データの検証\n          if (!compositionData.grid || !compositionData.instrument) {\n            throw new Error('無効なコンポジションデータです');\n          }\n\n          // データのロード\n          setGrid(compositionData.grid);\n          setSelectedInstrument(compositionData.instrument);\n\n          // 背景設定がある場合はそれも読み込み\n          if (compositionData.background) {\n            const bgPattern = backgroundPatterns.find(p => p.id === compositionData.background);\n            if (bgPattern) {\n              setCurrentPattern(bgPattern);\n            }\n          }\n          alert('コンポジションをロードしました！');\n        } catch (parseError) {\n          console.error('解析エラー:', parseError);\n          alert('無効なコンポジションファイルです。');\n        }\n      };\n      reader.readAsText(file);\n    } catch (e) {\n      console.error('ロードエラー:', e);\n      alert('読み込みに失敗しました。');\n    }\n\n    // input要素の値をリセット（同じファイルを連続で選択できるように）\n    event.target.value = null;\n  };\n\n  // タッチイベントの処理\n  const handleTouchStart = (e, row, col) => {\n    e.preventDefault(); // デフォルトのスクロールを防止\n    handleMouseDown(row, col);\n  };\n  const handleTouchMove = e => {\n    e.preventDefault();\n    if (!isMouseDown) return;\n\n    // タッチイベントから座標を取得\n    const touch = e.touches[0];\n    const gridElement = e.currentTarget;\n    const rect = gridElement.getBoundingClientRect();\n\n    // タッチ位置からグリッド上の位置を計算\n    const touchX = touch.clientX - rect.left;\n    const touchY = touch.clientY - rect.top;\n\n    // グリッドのセルサイズ（推定）\n    const cellWidth = rect.width / gridSize.cols;\n    const cellHeight = rect.height / gridSize.rows;\n\n    // タッチしたセルの計算\n    const col = Math.floor(touchX / cellWidth);\n    const row = Math.floor(touchY / cellHeight);\n\n    // グリッド範囲内かチェック\n    if (row >= 0 && row < gridSize.rows && col >= 0 && col < gridSize.cols) {\n      handleMouseOver(row, col);\n    }\n  };\n\n  // ファイル選択用の隠しinput\n  const fileInputRef = useRef(null);\n\n  // ファイル選択ダイアログを開く\n  const openFileDialog = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `min-h-screen ${colors.background} flex flex-col items-center py-8 px-4 bg-gradient-to-r ${currentPattern.className}`,\n    onMouseLeave: () => setIsMouseDown(false),\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-bold text-gray-800 mb-2\",\n      children: \"Harmonia Grid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-6\",\n      children: \"\\u30EA\\u30E9\\u30C3\\u30AF\\u30B9\\u3059\\u308B\\u305F\\u3081\\u306E\\u97F3\\u697D\\u30D1\\u30BF\\u30FC\\u30F3\\u3092\\u63CF\\u304D\\u307E\\u3057\\u3087\\u3046\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${colors.gridBackground} rounded-lg shadow-lg p-1 mb-6 overflow-auto mx-auto`,\n      style: {\n        width: 'fit-content',\n        maxWidth: '100%'\n      },\n      onTouchMove: handleTouchMove,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid-container\",\n        children: grid.map((row, rowIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex\",\n          children: row.map((cell, colIndex) => {\n            // サイズをTailwindクラスではなく、スタイルで直接指定\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `\n                      border border-gray-100 cursor-pointer transition-all duration-200\n                      ${cell ? instruments.find(i => i.id === selectedInstrument).color : 'bg-gray-50'}\n                      ${colIndex === currentColumn ? colors.playbackIndicator : ''}\n                      ${rowIndex % 2 === 0 ? 'opacity-90' : 'opacity-100'}\n                    `,\n              style: {\n                width: '30px',\n                height: '30px',\n                minWidth: '30px'\n              },\n              onMouseDown: () => handleMouseDown(rowIndex, colIndex),\n              onMouseOver: () => handleMouseOver(rowIndex, colIndex),\n              onTouchStart: e => handleTouchStart(e, rowIndex, colIndex),\n              children: cell && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `rounded-full ${instruments.find(i => i.id === selectedInstrument).dotColor} opacity-70 m-auto`,\n                style: {\n                  width: '10px',\n                  height: '10px'\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 23\n              }, this)\n            }, `cell-${rowIndex}-${colIndex}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 19\n            }, this);\n          })\n        }, `row-${rowIndex}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto mb-4`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap justify-center items-center gap-2 sm:gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${isPlaying ? colors.pauseButton : colors.playButton} px-3 py-1.5 sm:px-4 sm:py-2 rounded-md flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,\n          onClick: togglePlayback,\n          children: isPlaying ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Pause, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 28\n            }, this), \" \\u505C\\u6B62\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Play, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 476,\n              columnNumber: 58\n            }, this), \" \\u518D\\u751F\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500 mb-1\",\n            children: \"\\u901F\\u3055\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-1 sm:gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`,\n              onClick: () => setPlaybackSpeed(Math.max(0.5, playbackSpeed - 0.25)),\n              children: \"-\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs sm:text-sm w-12 sm:w-16 text-center\",\n              children: [playbackSpeed.toFixed(2), \"x\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`,\n              onClick: () => setPlaybackSpeed(Math.min(2.0, playbackSpeed + 0.25)),\n              children: \"+\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-wrap justify-between items-center gap-2 sm:gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-1 sm:gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Volume2, {\n            size: 16,\n            className: \"text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"1\",\n            step: \"0.1\",\n            value: volume,\n            onChange: e => setVolume(parseFloat(e.target.value)),\n            className: \"w-16 sm:w-24\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs sm:text-sm\",\n            children: \"\\u97F3\\u91CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex gap-1 sm:gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md flex items-center gap-1 text-xs sm:text-sm`,\n            onClick: generateRandomPattern,\n            children: [/*#__PURE__*/_jsxDEV(RefreshCw, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hidden xs:inline\",\n              children: \"\\u30E9\\u30F3\\u30C0\\u30E0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md text-xs sm:text-sm`,\n            onClick: clearGrid,\n            children: \"\\u30AF\\u30EA\\u30A2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 sm:mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mb-1\",\n          children: \"\\u697D\\u5668\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-1 sm:gap-2\",\n          children: instruments.map(instrument => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${selectedInstrument === instrument.id ? colors.button : colors.buttonSecondary}`,\n            onClick: () => setSelectedInstrument(instrument.id),\n            children: instrument.name\n          }, instrument.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 sm:mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mb-1\",\n          children: \"\\u80CC\\u666F\\u30D1\\u30BF\\u30FC\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-1 sm:gap-2\",\n          children: backgroundPatterns.map(pattern => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${currentPattern.id === pattern.id ? colors.button : colors.buttonSecondary}`,\n            onClick: () => changeBackgroundPattern(pattern),\n            children: pattern.name\n          }, pattern.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-3 sm:mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-500 mb-1\",\n          children: \"\\u30B3\\u30F3\\u30DD\\u30B8\\u30B7\\u30E7\\u30F3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-wrap gap-1 sm:gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`,\n            onClick: saveComposition,\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 15\n            }, this), \"\\u4FDD\\u5B58\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 576,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`,\n            onClick: openFileDialog,\n            children: [/*#__PURE__*/_jsxDEV(Upload, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 15\n            }, this), \"\\u8AAD\\u307F\\u8FBC\\u307F\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            ref: fileInputRef,\n            className: \"hidden\",\n            accept: \".json\",\n            onChange: loadComposition\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 590,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 sm:mt-8 text-gray-600 text-xs sm:text-sm max-w-md mx-auto text-center px-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u30DE\\u30B9\\u76EE\\u3092\\u30AF\\u30EA\\u30C3\\u30AF\\uFF06\\u30C9\\u30E9\\u30C3\\u30B0\\u3067\\u97F3\\u7B26\\u3092\\u914D\\u7F6E\\u3067\\u304D\\u307E\\u3059\\u3002\\u97F3\\u7B26\\u3092\\u7F6E\\u304F\\u3068\\u540C\\u6642\\u306B\\u97F3\\u304C\\u9CF4\\u308A\\u307E\\u3059\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 sm:mt-2\",\n        children: \"\\u30EA\\u30E9\\u30C3\\u30AF\\u30B9\\u3059\\u308B\\u305F\\u3081\\u306E\\u30DA\\u30F3\\u30BF\\u30C8\\u30CB\\u30C3\\u30AF\\u30B9\\u30B1\\u30FC\\u30EB\\u3092\\u4F7F\\u7528\\u3057\\u3066\\u3044\\u308B\\u306E\\u3067\\u3001\\u3069\\u306E\\u7D44\\u307F\\u5408\\u308F\\u305B\\u3082\\u5FC3\\u5730\\u3088\\u304F\\u97FF\\u304D\\u307E\\u3059\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 604,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-1 sm:mt-2\",\n        children: \"\\u518D\\u751F\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u3001\\u5DE6\\u304B\\u3089\\u53F3\\u3078\\u3068\\u9806\\u756A\\u306B\\u97F3\\u304C\\u9CF4\\u308A\\u307E\\u3059\\u3002\\u4FDD\\u5B58\\u30DC\\u30BF\\u30F3\\u3067\\u304A\\u6C17\\u306B\\u5165\\u308A\\u306E\\u66F2\\u3092\\u4FDD\\u5B58\\u3059\\u308B\\u3053\\u3068\\u3082\\u3067\\u304D\\u307E\\u3059\\u3002\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 605,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 602,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 415,\n    columnNumber: 5\n  }, this);\n};\n_s(CalmComposer, \"bomHX0E2glN8U2ERIYwkMnrwngI=\");\n_c = CalmComposer;\nexport default CalmComposer;\nvar _c;\n$RefreshReg$(_c, \"CalmComposer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Volume2","RefreshCw","Play","Pause","Save","Upload","jsxDEV","_jsxDEV","Fragment","_Fragment","CalmComposer","_s","gridSize","setGridSize","rows","cols","grid","setGrid","selectedInstrument","setSelectedInstrument","volume","setVolume","isPlaying","setIsPlaying","playbackSpeed","setPlaybackSpeed","currentColumn","setCurrentColumn","playbackRef","isMouseDown","setIsMouseDown","isAddMode","setIsAddMode","lastCell","setLastCell","row","col","audioContextRef","pentatonicScale","reverse","colors","background","gridBackground","hoveredCell","playbackIndicator","controls","button","buttonSecondary","playButton","pauseButton","instruments","id","name","type","color","dotColor","backgroundPatterns","className","currentPattern","setCurrentPattern","newGrid","Array","fill","map","current","window","AudioContext","webkitAudioContext","state","close","handleGlobalMouseUp","addEventListener","removeEventListener","column","playColumn","playNote","speed","setInterval","clearInterval","handleMouseDown","resume","cellValue","handleMouseOver","time","currentTime","oscillator","createOscillator","gainNode","createGain","instrumentSettings","gain","setValueAtTime","exponentialRampToValueAtTime","linearRampToValueAtTime","harmonicOsc","harmonicGain","frequency","connect","destination","start","stop","clearGrid","generateRandomPattern","notesInColumn","Math","floor","random","i","togglePlayback","stopPlayback","changeBackgroundPattern","pattern","saveComposition","compositionData","instrument","version","jsonData","JSON","stringify","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","slice","body","appendChild","click","removeChild","revokeObjectURL","alert","e","console","error","loadComposition","event","file","target","files","reader","FileReader","onload","parse","result","Error","bgPattern","find","p","parseError","readAsText","value","handleTouchStart","preventDefault","handleTouchMove","touch","touches","gridElement","currentTarget","rect","getBoundingClientRect","touchX","clientX","left","touchY","clientY","top","cellWidth","width","cellHeight","height","fileInputRef","openFileDialog","onMouseLeave","children","fileName","_jsxFileName","lineNumber","columnNumber","style","maxWidth","onTouchMove","rowIndex","cell","colIndex","minWidth","onMouseDown","onMouseOver","onTouchStart","onClick","size","max","toFixed","min","step","onChange","parseFloat","ref","accept","_c","$RefreshReg$"],"sources":["/Users/ayakos/Documents/dev/chillax-top/calm-composer/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Volume2, RefreshCw, Play, Pause, Save, Upload } from 'lucide-react';\n\nconst CalmComposer = () => {\n  // グリッドの設定\n  const [gridSize, setGridSize] = useState({ rows: 13, cols: 16 });\n  const [grid, setGrid] = useState([]);\n  const [selectedInstrument, setSelectedInstrument] = useState('synth');\n  const [volume, setVolume] = useState(0.5);\n  \n  // 再生関連の状態\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1.0);\n  const [currentColumn, setCurrentColumn] = useState(-1);\n  const playbackRef = useRef(null);\n  \n  // マウスの状態を追跡\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [isAddMode, setIsAddMode] = useState(true); // マウスダウン時の最初のセルの状態で追加か削除かを決定\n  const [lastCell, setLastCell] = useState({ row: -1, col: -1 });\n  \n  // 音楽再生用の参照\n  const audioContextRef = useRef(null);\n  \n  // スケールの設定（ペンタトニックスケール - リラクゼーション向き）\n  const pentatonicScale = [\n    523.25, // C5\n    587.33, // D5\n    659.25, // E5\n    783.99, // G5\n    880.00, // A5\n    1046.50, // C6\n    1174.66, // D6\n    1318.51, // E6\n    1567.98, // G6\n    1760.00, // A6\n    2093.00, // C7\n    2349.32, // D7\n    2637.02  // E7\n  ].reverse(); // 上から下へ表示するために反転\n  \n  // 色のパレット（リラックス効果のある色合い）\n  const colors = {\n    background: 'bg-gradient-to-r from-blue-50 to-purple-50',\n    gridBackground: 'bg-white',\n    hoveredCell: 'bg-indigo-200',\n    playbackIndicator: 'bg-blue-200 opacity-30',\n    controls: 'bg-white',\n    button: 'bg-indigo-500 hover:bg-indigo-600 text-white',\n    buttonSecondary: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\n    playButton: 'bg-green-500 hover:bg-green-600 text-white',\n    pauseButton: 'bg-amber-500 hover:bg-amber-600 text-white'\n  };\n  \n  // 楽器の音色設定と色\n  const instruments = [\n    { id: 'synth', name: 'シンセ', type: 'sine', color: 'bg-indigo-400', dotColor: 'bg-white' },\n    { id: 'bell', name: 'ベル', type: 'triangle', color: 'bg-teal-400', dotColor: 'bg-white' },\n    { id: 'soft', name: 'ソフト', type: 'sine', color: 'bg-purple-400', dotColor: 'bg-white' },\n    { id: 'warm', name: '温かみ', type: 'sine', color: 'bg-amber-400', dotColor: 'bg-white' }\n  ];\n  \n  // 背景パターン\n  const backgroundPatterns = [\n    { id: 'waves', name: '波', className: 'from-blue-50 to-purple-50' },\n    { id: 'sunset', name: '夕暮れ', className: 'from-orange-50 to-pink-50' },\n    { id: 'forest', name: '森', className: 'from-green-50 to-teal-50' },\n    { id: 'night', name: '夜', className: 'from-indigo-50 to-purple-100' }\n  ];\n  \n  const [currentPattern, setCurrentPattern] = useState(backgroundPatterns[0]);\n  \n  // グリッドの初期化\n  useEffect(() => {\n    // 初期グリッドを作成（すべてのセルをfalseに）\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n    \n    // Web Audio APIのセットアップ\n    audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n    \n    return () => {\n      // クリーンアップ\n      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n        audioContextRef.current.close();\n      }\n    };\n  }, []);\n  \n  // グローバルなマウスイベントの設定\n  useEffect(() => {\n    const handleGlobalMouseUp = () => {\n      setIsMouseDown(false);\n      setLastCell({ row: -1, col: -1 });\n    };\n    \n    window.addEventListener('mouseup', handleGlobalMouseUp);\n    window.addEventListener('mouseleave', handleGlobalMouseUp);\n    \n    return () => {\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\n      window.removeEventListener('mouseleave', handleGlobalMouseUp);\n    };\n  }, []);\n  \n  // 再生機能の管理\n  useEffect(() => {\n    if (isPlaying) {\n      // 再生開始\n      let column = currentColumn < 0 ? 0 : currentColumn;\n      \n      const playColumn = () => {\n        // 現在の列のアクティブなセルを鳴らす\n        for (let row = 0; row < gridSize.rows; row++) {\n          if (grid[row][column]) {\n            playNote(row);\n          }\n        }\n        \n        // 次の列に進む\n        column = (column + 1) % gridSize.cols;\n        setCurrentColumn(column);\n      };\n      \n      // 再生速度に応じた間隔でタイマーをセット\n      const speed = 300 / playbackSpeed; // ベース速度を300ミリ秒に設定\n      playbackRef.current = setInterval(playColumn, speed);\n      \n      return () => {\n        clearInterval(playbackRef.current);\n      };\n    } else {\n      // 再生終了時の処理\n      if (playbackRef.current) {\n        clearInterval(playbackRef.current);\n      }\n    }\n  }, [isPlaying, grid, playbackSpeed]);\n  \n  // マウスダウンの処理\n  const handleMouseDown = (row, col) => {\n    // Safariのための対応\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    \n    setIsMouseDown(true);\n    setLastCell({ row, col });\n    \n    // 現在のセルの状態に基づいて、追加モードか削除モードかを設定\n    const cellValue = grid[row][col];\n    setIsAddMode(!cellValue);\n    \n    // セルの状態を更新\n    const newGrid = [...grid];\n    newGrid[row][col] = !cellValue;\n    setGrid(newGrid);\n    \n    // 追加モードのときのみ音を鳴らす\n    if (!cellValue) {\n      playNote(row);\n    }\n  };\n  \n  // マウスオーバーの処理（ドラッグ時）\n  const handleMouseOver = (row, col) => {\n    if (!isMouseDown || (lastCell.row === row && lastCell.col === col)) {\n      return;\n    }\n    \n    setLastCell({ row, col });\n    \n    const newGrid = [...grid];\n    // 追加モードか削除モードかに基づいてセルを更新\n    newGrid[row][col] = isAddMode;\n    setGrid(newGrid);\n    \n    // 追加モードのときのみ音を鳴らす\n    if (isAddMode) {\n      playNote(row);\n    }\n  };\n  \n  // 音を鳴らす関数\n  const playNote = (row, time = audioContextRef.current.currentTime) => {\n    if (!audioContextRef.current) return;\n    \n    const oscillator = audioContextRef.current.createOscillator();\n    const gainNode = audioContextRef.current.createGain();\n    \n    // 楽器タイプに基づいた設定\n    let instrumentSettings;\n    switch (selectedInstrument) {\n      case 'bell':\n        oscillator.type = 'triangle';\n        // ベル風の音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.01, time + 1.5);\n        break;\n      case 'soft':\n        oscillator.type = 'sine';\n        // ソフトな音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume * 0.7, time + 0.1);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 2.0);\n        break;\n      case 'warm':\n        oscillator.type = 'sine';\n        // 温かみのある音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume, time + 0.05);\n        gainNode.gain.exponentialRampToValueAtTime(volume * 0.6, time + 0.2);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.8);\n        \n        // 温かみを出すために倍音を追加\n        const harmonicOsc = audioContextRef.current.createOscillator();\n        const harmonicGain = audioContextRef.current.createGain();\n        harmonicOsc.frequency.setValueAtTime(pentatonicScale[row] * 2, time);\n        harmonicGain.gain.setValueAtTime(volume * 0.2, time);\n        harmonicGain.gain.exponentialRampToValueAtTime(0.001, time + 1.5);\n        harmonicOsc.connect(harmonicGain);\n        harmonicGain.connect(audioContextRef.current.destination);\n        harmonicOsc.start(time);\n        harmonicOsc.stop(time + 1.8);\n        break;\n      default: // synth\n        oscillator.type = 'sine';\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.0);\n    }\n    \n    oscillator.frequency.setValueAtTime(pentatonicScale[row], time);\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContextRef.current.destination);\n    \n    oscillator.start(time);\n    oscillator.stop(time + 2.0); // 2秒後に音を止める\n  };\n  \n  // グリッドをクリア\n  const clearGrid = () => {\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n\n  // ランダムなパターンを生成（リラクゼーション向きのパターン）\n  const generateRandomPattern = () => {\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    \n    // 適度な密度でランダムに配置（約15%のセルをアクティブに）\n    for (let col = 0; col < gridSize.cols; col++) {\n      // 各列に1〜3個の音符を配置\n      const notesInColumn = Math.floor(Math.random() * 3) + 1;\n      for (let i = 0; i < notesInColumn; i++) {\n        // リラクゼーション向きにするため、低音と高音を避けて中音域を多めに\n        let row;\n        if (Math.random() < 0.7) {\n          // 70%の確率で中音域（4-9）\n          row = Math.floor(Math.random() * 6) + 4;\n        } else {\n          // 30%の確率で全域\n          row = Math.floor(Math.random() * gridSize.rows);\n        }\n        newGrid[row][col] = true;\n      }\n    }\n    \n    setGrid(newGrid);\n  };\n  \n  // 再生/停止の切り替え\n  const togglePlayback = () => {\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    setIsPlaying(!isPlaying);\n  };\n  \n  // 再生を停止し、先頭に戻る\n  const stopPlayback = () => {\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n  \n  // 背景パターンの変更\n  const changeBackgroundPattern = (pattern) => {\n    setCurrentPattern(pattern);\n  };\n  \n  // コンポジションの保存\n  const saveComposition = () => {\n    try {\n      // コンポジションデータの作成\n      const compositionData = {\n        grid,\n        instrument: selectedInstrument,\n        background: currentPattern.id,\n        version: '1.1'\n      };\n      \n      // JSON形式で保存\n      const jsonData = JSON.stringify(compositionData);\n      const blob = new Blob([jsonData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      \n      // ダウンロードリンクの作成と実行\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `calm-composition-${new Date().toISOString().slice(0, 10)}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      \n      alert('コンポジションを保存しました！');\n    } catch (e) {\n      console.error('保存エラー:', e);\n      alert('保存に失敗しました。');\n    }\n  };\n  \n  // コンポジションのロード\n  const loadComposition = (event) => {\n    try {\n      const file = event.target.files[0];\n      if (!file) return;\n      \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const compositionData = JSON.parse(e.target.result);\n          \n          // データの検証\n          if (!compositionData.grid || !compositionData.instrument) {\n            throw new Error('無効なコンポジションデータです');\n          }\n          \n          // データのロード\n          setGrid(compositionData.grid);\n          setSelectedInstrument(compositionData.instrument);\n          \n          // 背景設定がある場合はそれも読み込み\n          if (compositionData.background) {\n            const bgPattern = backgroundPatterns.find(p => p.id === compositionData.background);\n            if (bgPattern) {\n              setCurrentPattern(bgPattern);\n            }\n          }\n          \n          alert('コンポジションをロードしました！');\n        } catch (parseError) {\n          console.error('解析エラー:', parseError);\n          alert('無効なコンポジションファイルです。');\n        }\n      };\n      reader.readAsText(file);\n    } catch (e) {\n      console.error('ロードエラー:', e);\n      alert('読み込みに失敗しました。');\n    }\n    \n    // input要素の値をリセット（同じファイルを連続で選択できるように）\n    event.target.value = null;\n  };\n  \n  // タッチイベントの処理\n  const handleTouchStart = (e, row, col) => {\n    e.preventDefault(); // デフォルトのスクロールを防止\n    handleMouseDown(row, col);\n  };\n  \n  const handleTouchMove = (e) => {\n    e.preventDefault();\n    if (!isMouseDown) return;\n    \n    // タッチイベントから座標を取得\n    const touch = e.touches[0];\n    const gridElement = e.currentTarget;\n    const rect = gridElement.getBoundingClientRect();\n    \n    // タッチ位置からグリッド上の位置を計算\n    const touchX = touch.clientX - rect.left;\n    const touchY = touch.clientY - rect.top;\n    \n    // グリッドのセルサイズ（推定）\n    const cellWidth = rect.width / gridSize.cols;\n    const cellHeight = rect.height / gridSize.rows;\n    \n    // タッチしたセルの計算\n    const col = Math.floor(touchX / cellWidth);\n    const row = Math.floor(touchY / cellHeight);\n    \n    // グリッド範囲内かチェック\n    if (row >= 0 && row < gridSize.rows && col >= 0 && col < gridSize.cols) {\n      handleMouseOver(row, col);\n    }\n  };\n  \n  // ファイル選択用の隠しinput\n  const fileInputRef = useRef(null);\n  \n  // ファイル選択ダイアログを開く\n  const openFileDialog = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n  \n  return (\n    <div \n      className={`min-h-screen ${colors.background} flex flex-col items-center py-8 px-4 bg-gradient-to-r ${currentPattern.className}`}\n      onMouseLeave={() => setIsMouseDown(false)}\n    >\n      <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Harmonia Grid</h1>\n      <p className=\"text-gray-600 mb-6\">リラックスするための音楽パターンを描きましょう</p>\n      \n      {/* メインの音楽グリッド - レスポンシブ対応 */}\n      <div \n        className={`${colors.gridBackground} rounded-lg shadow-lg p-1 mb-6 overflow-auto mx-auto`}\n        style={{ \n          width: 'fit-content', \n          maxWidth: '100%'\n        }}\n        onTouchMove={handleTouchMove}\n      >\n        <div className=\"grid-container\">\n          {grid.map((row, rowIndex) => (\n            <div key={`row-${rowIndex}`} className=\"flex\">\n              {row.map((cell, colIndex) => {\n                // サイズをTailwindクラスではなく、スタイルで直接指定\n                return (\n                  <div\n                    key={`cell-${rowIndex}-${colIndex}`}\n                    className={`\n                      border border-gray-100 cursor-pointer transition-all duration-200\n                      ${cell ? instruments.find(i => i.id === selectedInstrument).color : 'bg-gray-50'}\n                      ${colIndex === currentColumn ? colors.playbackIndicator : ''}\n                      ${rowIndex % 2 === 0 ? 'opacity-90' : 'opacity-100'}\n                    `}\n                    style={{\n                      width: '30px',\n                      height: '30px',\n                      minWidth: '30px',\n                    }}\n                    onMouseDown={() => handleMouseDown(rowIndex, colIndex)}\n                    onMouseOver={() => handleMouseOver(rowIndex, colIndex)}\n                    onTouchStart={(e) => handleTouchStart(e, rowIndex, colIndex)}\n                  >\n                    {cell && \n                      <div \n                        className={`rounded-full ${instruments.find(i => i.id === selectedInstrument).dotColor} opacity-70 m-auto`}\n                        style={{ width: '10px', height: '10px' }}\n                      ></div>\n                    }\n                  </div>\n                );\n              })}\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      {/* 再生コントロール - レスポンシブ対応 */}\n      <div className={`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto mb-4`}>\n        <div className=\"flex flex-wrap justify-center items-center gap-2 sm:gap-4\">\n          {/* 再生/停止ボタン */}\n          <button \n            className={`${isPlaying ? colors.pauseButton : colors.playButton} px-3 py-1.5 sm:px-4 sm:py-2 rounded-md flex items-center gap-1 sm:gap-2 text-sm sm:text-base`}\n            onClick={togglePlayback}\n          >\n            {isPlaying ? <><Pause size={16} /> 停止</> : <><Play size={16} /> 再生</>}\n          </button>\n          \n          {/* 再生速度 */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-xs text-gray-500 mb-1\">速さ</div>\n            <div className=\"flex items-center gap-1 sm:gap-2\">\n              <button \n                className={`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`}\n                onClick={() => setPlaybackSpeed(Math.max(0.5, playbackSpeed - 0.25))}\n              >\n                -\n              </button>\n              <span className=\"text-xs sm:text-sm w-12 sm:w-16 text-center\">{playbackSpeed.toFixed(2)}x</span>\n              <button \n                className={`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`}\n                onClick={() => setPlaybackSpeed(Math.min(2.0, playbackSpeed + 0.25))}\n              >\n                +\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* コントロールパネル - レスポンシブ対応 */}\n      <div className={`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto`}>\n        <div className=\"flex flex-wrap justify-between items-center gap-2 sm:gap-4\">\n          {/* 音量コントロール */}\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <Volume2 size={16} className=\"text-gray-500\" />\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.1\"\n              value={volume}\n              onChange={(e) => setVolume(parseFloat(e.target.value))}\n              className=\"w-16 sm:w-24\"\n            />\n            <span className=\"text-xs sm:text-sm\">音量</span>\n          </div>\n          \n          {/* ボタン群をレスポンシブに */}\n          <div className=\"flex gap-1 sm:gap-2\">\n            {/* パターン生成ボタン */}\n            <button \n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md flex items-center gap-1 text-xs sm:text-sm`}\n              onClick={generateRandomPattern}\n            >\n              <RefreshCw size={14} />\n              <span className=\"hidden xs:inline\">ランダム</span>\n            </button>\n            \n            {/* クリアボタン */}\n            <button \n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md text-xs sm:text-sm`}\n              onClick={clearGrid}\n            >\n              クリア\n            </button>\n          </div>\n        </div>\n        \n        {/* 楽器選択 - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">楽器</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            {instruments.map(instrument => (\n              <button\n                key={instrument.id}\n                className={`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${selectedInstrument === instrument.id ? colors.button : colors.buttonSecondary}`}\n                onClick={() => setSelectedInstrument(instrument.id)}\n              >\n                {instrument.name}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        {/* 背景パターン選択 - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">背景パターン</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            {backgroundPatterns.map(pattern => (\n              <button\n                key={pattern.id}\n                className={`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${currentPattern.id === pattern.id ? colors.button : colors.buttonSecondary}`}\n                onClick={() => changeBackgroundPattern(pattern)}\n              >\n                {pattern.name}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        {/* 保存とロード - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">コンポジション</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            <button\n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`}\n              onClick={saveComposition}\n            >\n              <Save size={14} />\n              保存\n            </button>\n            <button\n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`}\n              onClick={openFileDialog}\n            >\n              <Upload size={14} />\n              読み込み\n            </button>\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              className=\"hidden\"\n              accept=\".json\"\n              onChange={loadComposition}\n            />\n          </div>\n        </div>\n      </div>\n      \n      {/* 使い方ガイド - レスポンシブ対応 */}\n      <div className=\"mt-6 sm:mt-8 text-gray-600 text-xs sm:text-sm max-w-md mx-auto text-center px-2\">\n        <p>マス目をクリック＆ドラッグで音符を配置できます。音符を置くと同時に音が鳴ります。</p>\n        <p className=\"mt-1 sm:mt-2\">リラックスするためのペンタトニックスケールを使用しているので、どの組み合わせも心地よく響きます。</p>\n        <p className=\"mt-1 sm:mt-2\">再生ボタンを押すと、左から右へと順番に音が鳴ります。保存ボタンでお気に入りの曲を保存することもできます。</p>\n      </div>\n    </div>\n  );\n};\n\nexport default CalmComposer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}