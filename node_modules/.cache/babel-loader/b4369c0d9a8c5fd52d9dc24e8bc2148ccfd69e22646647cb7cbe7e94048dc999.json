{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Volume2,RefreshCw,Play,Pause,Save,Upload}from'lucide-react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const CalmComposer=()=>{// グリッドの設定\nconst[gridSize,setGridSize]=useState({rows:13,cols:16});const[grid,setGrid]=useState([]);const[selectedInstrument,setSelectedInstrument]=useState('synth');const[volume,setVolume]=useState(0.5);// 再生関連の状態\nconst[isPlaying,setIsPlaying]=useState(false);const[playbackSpeed,setPlaybackSpeed]=useState(1.0);const[currentColumn,setCurrentColumn]=useState(-1);const playbackRef=useRef(null);// マウスの状態を追跡\nconst[isMouseDown,setIsMouseDown]=useState(false);const[isAddMode,setIsAddMode]=useState(true);// マウスダウン時の最初のセルの状態で追加か削除かを決定\nconst[lastCell,setLastCell]=useState({row:-1,col:-1});// 音楽再生用の参照\nconst audioContextRef=useRef(null);// スケールの設定（ペンタトニックスケール - リラクゼーション向き）\nconst pentatonicScale=[523.25,// C5\n587.33,// D5\n659.25,// E5\n783.99,// G5\n880.00,// A5\n1046.50,// C6\n1174.66,// D6\n1318.51,// E6\n1567.98,// G6\n1760.00,// A6\n2093.00,// C7\n2349.32,// D7\n2637.02// E7\n].reverse();// 上から下へ表示するために反転\n// 色のパレット（リラックス効果のある色合い）\nconst colors={background:'bg-gradient-to-r from-blue-50 to-purple-50',gridBackground:'bg-white',hoveredCell:'bg-indigo-200',playbackIndicator:'bg-blue-200 opacity-30',controls:'bg-white',button:'bg-indigo-500 hover:bg-indigo-600 text-white',buttonSecondary:'bg-gray-200 hover:bg-gray-300 text-gray-800',playButton:'bg-green-500 hover:bg-green-600 text-white',pauseButton:'bg-amber-500 hover:bg-amber-600 text-white'};// 楽器の音色設定と色\nconst instruments=[{id:'synth',name:'シンセ',type:'sine',color:'bg-indigo-400',dotColor:'bg-white'},{id:'bell',name:'ベル',type:'triangle',color:'bg-teal-400',dotColor:'bg-white'},{id:'soft',name:'ソフト',type:'sine',color:'bg-purple-400',dotColor:'bg-white'},{id:'warm',name:'温かみ',type:'sine',color:'bg-amber-400',dotColor:'bg-white'}];// 背景パターン\nconst backgroundPatterns=[{id:'waves',name:'波',className:'from-blue-50 to-purple-50'},{id:'sunset',name:'夕暮れ',className:'from-orange-50 to-pink-50'},{id:'forest',name:'森',className:'from-green-50 to-teal-50'},{id:'night',name:'夜',className:'from-indigo-50 to-purple-100'}];const[currentPattern,setCurrentPattern]=useState(backgroundPatterns[0]);// グリッドの初期化\nuseEffect(()=>{// 初期グリッドを作成（すべてのセルをfalseに）\nconst newGrid=Array(gridSize.rows).fill().map(()=>Array(gridSize.cols).fill(false));setGrid(newGrid);// Web Audio APIのセットアップ\naudioContextRef.current=new(window.AudioContext||window.webkitAudioContext)();return()=>{// クリーンアップ\nif(audioContextRef.current&&audioContextRef.current.state!=='closed'){audioContextRef.current.close();}};},[]);// グローバルなマウスイベントの設定\nuseEffect(()=>{const handleGlobalMouseUp=()=>{setIsMouseDown(false);setLastCell({row:-1,col:-1});};window.addEventListener('mouseup',handleGlobalMouseUp);window.addEventListener('mouseleave',handleGlobalMouseUp);return()=>{window.removeEventListener('mouseup',handleGlobalMouseUp);window.removeEventListener('mouseleave',handleGlobalMouseUp);};},[]);// 再生機能の管理\nuseEffect(()=>{if(isPlaying){// 再生開始\nlet column=currentColumn<0?0:currentColumn;const playColumn=()=>{// 現在の列のアクティブなセルを鳴らす\nfor(let row=0;row<gridSize.rows;row++){if(grid[row][column]){playNote(row);}}// 次の列に進む\ncolumn=(column+1)%gridSize.cols;setCurrentColumn(column);};// 再生速度に応じた間隔でタイマーをセット\nconst speed=300/playbackSpeed;// ベース速度を300ミリ秒に設定\nplaybackRef.current=setInterval(playColumn,speed);return()=>{clearInterval(playbackRef.current);};}else{// 再生終了時の処理\nif(playbackRef.current){clearInterval(playbackRef.current);}}},[isPlaying,grid,playbackSpeed]);// マウスダウンの処理\nconst handleMouseDown=(row,col)=>{// Safariのための対応\nif(audioContextRef.current.state==='suspended'){audioContextRef.current.resume();}setIsMouseDown(true);setLastCell({row,col});// 現在のセルの状態に基づいて、追加モードか削除モードかを設定\nconst cellValue=grid[row][col];setIsAddMode(!cellValue);// セルの状態を更新\nconst newGrid=[...grid];newGrid[row][col]=!cellValue;setGrid(newGrid);// 追加モードのときのみ音を鳴らす\nif(!cellValue){playNote(row);}};// マウスオーバーの処理（ドラッグ時）\nconst handleMouseOver=(row,col)=>{if(!isMouseDown||lastCell.row===row&&lastCell.col===col){return;}setLastCell({row,col});const newGrid=[...grid];// 追加モードか削除モードかに基づいてセルを更新\nnewGrid[row][col]=isAddMode;setGrid(newGrid);// 追加モードのときのみ音を鳴らす\nif(isAddMode){playNote(row);}};// 音を鳴らす関数\nconst playNote=function(row){let time=arguments.length>1&&arguments[1]!==undefined?arguments[1]:audioContextRef.current.currentTime;if(!audioContextRef.current)return;const oscillator=audioContextRef.current.createOscillator();const gainNode=audioContextRef.current.createGain();// 楽器タイプに基づいた設定\nlet instrumentSettings;switch(selectedInstrument){case'bell':oscillator.type='triangle';// ベル風の音にするためのエンベロープ設定\ngainNode.gain.setValueAtTime(volume,time);gainNode.gain.exponentialRampToValueAtTime(0.01,time+1.5);break;case'soft':oscillator.type='sine';// ソフトな音にするためのエンベロープ設定\ngainNode.gain.setValueAtTime(0,time);gainNode.gain.linearRampToValueAtTime(volume*0.7,time+0.1);gainNode.gain.exponentialRampToValueAtTime(0.001,time+2.0);break;case'warm':oscillator.type='sine';// 温かみのある音にするためのエンベロープ設定\ngainNode.gain.setValueAtTime(0,time);gainNode.gain.linearRampToValueAtTime(volume,time+0.05);gainNode.gain.exponentialRampToValueAtTime(volume*0.6,time+0.2);gainNode.gain.exponentialRampToValueAtTime(0.001,time+1.8);// 温かみを出すために倍音を追加\nconst harmonicOsc=audioContextRef.current.createOscillator();const harmonicGain=audioContextRef.current.createGain();harmonicOsc.frequency.setValueAtTime(pentatonicScale[row]*2,time);harmonicGain.gain.setValueAtTime(volume*0.2,time);harmonicGain.gain.exponentialRampToValueAtTime(0.001,time+1.5);harmonicOsc.connect(harmonicGain);harmonicGain.connect(audioContextRef.current.destination);harmonicOsc.start(time);harmonicOsc.stop(time+1.8);break;default:// synth\noscillator.type='sine';gainNode.gain.setValueAtTime(volume,time);gainNode.gain.exponentialRampToValueAtTime(0.001,time+1.0);}oscillator.frequency.setValueAtTime(pentatonicScale[row],time);oscillator.connect(gainNode);gainNode.connect(audioContextRef.current.destination);oscillator.start(time);oscillator.stop(time+2.0);// 2秒後に音を止める\n};// グリッドをクリア\nconst clearGrid=()=>{const newGrid=Array(gridSize.rows).fill().map(()=>Array(gridSize.cols).fill(false));setGrid(newGrid);setIsPlaying(false);setCurrentColumn(-1);};// ランダムなパターンを生成（リラクゼーション向きのパターン）\nconst generateRandomPattern=()=>{const newGrid=Array(gridSize.rows).fill().map(()=>Array(gridSize.cols).fill(false));// 適度な密度でランダムに配置（約15%のセルをアクティブに）\nfor(let col=0;col<gridSize.cols;col++){// 各列に1〜3個の音符を配置\nconst notesInColumn=Math.floor(Math.random()*3)+1;for(let i=0;i<notesInColumn;i++){// リラクゼーション向きにするため、低音と高音を避けて中音域を多めに\nlet row;if(Math.random()<0.7){// 70%の確率で中音域（4-9）\nrow=Math.floor(Math.random()*6)+4;}else{// 30%の確率で全域\nrow=Math.floor(Math.random()*gridSize.rows);}newGrid[row][col]=true;}}setGrid(newGrid);};// 再生/停止の切り替え\nconst togglePlayback=()=>{if(audioContextRef.current.state==='suspended'){audioContextRef.current.resume();}setIsPlaying(!isPlaying);};// 再生を停止し、先頭に戻る\nconst stopPlayback=()=>{setIsPlaying(false);setCurrentColumn(-1);};// 背景パターンの変更\nconst changeBackgroundPattern=pattern=>{setCurrentPattern(pattern);};// コンポジションの保存\nconst saveComposition=()=>{try{// コンポジションデータの作成\nconst compositionData={grid,instrument:selectedInstrument,background:currentPattern.id,version:'1.1'};// JSON形式で保存\nconst jsonData=JSON.stringify(compositionData);const blob=new Blob([jsonData],{type:'application/json'});const url=URL.createObjectURL(blob);// ダウンロードリンクの作成と実行\nconst a=document.createElement('a');a.href=url;a.download=`calm-composition-${new Date().toISOString().slice(0,10)}.json`;document.body.appendChild(a);a.click();document.body.removeChild(a);URL.revokeObjectURL(url);alert('コンポジションを保存しました！');}catch(e){console.error('保存エラー:',e);alert('保存に失敗しました。');}};// コンポジションのロード\nconst loadComposition=event=>{try{const file=event.target.files[0];if(!file)return;const reader=new FileReader();reader.onload=e=>{try{const compositionData=JSON.parse(e.target.result);// データの検証\nif(!compositionData.grid||!compositionData.instrument){throw new Error('無効なコンポジションデータです');}// データのロード\nsetGrid(compositionData.grid);setSelectedInstrument(compositionData.instrument);// 背景設定がある場合はそれも読み込み\nif(compositionData.background){const bgPattern=backgroundPatterns.find(p=>p.id===compositionData.background);if(bgPattern){setCurrentPattern(bgPattern);}}alert('コンポジションをロードしました！');}catch(parseError){console.error('解析エラー:',parseError);alert('無効なコンポジションファイルです。');}};reader.readAsText(file);}catch(e){console.error('ロードエラー:',e);alert('読み込みに失敗しました。');}// input要素の値をリセット（同じファイルを連続で選択できるように）\nevent.target.value=null;};// タッチイベントの処理\nconst handleTouchStart=(e,row,col)=>{e.preventDefault();// デフォルトのスクロールを防止\nhandleMouseDown(row,col);};const handleTouchMove=e=>{e.preventDefault();if(!isMouseDown)return;// タッチイベントから座標を取得\nconst touch=e.touches[0];const gridElement=e.currentTarget;const rect=gridElement.getBoundingClientRect();// タッチ位置からグリッド上の位置を計算\nconst touchX=touch.clientX-rect.left;const touchY=touch.clientY-rect.top;// グリッドのセルサイズ（推定）\nconst cellWidth=rect.width/gridSize.cols;const cellHeight=rect.height/gridSize.rows;// タッチしたセルの計算\nconst col=Math.floor(touchX/cellWidth);const row=Math.floor(touchY/cellHeight);// グリッド範囲内かチェック\nif(row>=0&&row<gridSize.rows&&col>=0&&col<gridSize.cols){handleMouseOver(row,col);}};// ファイル選択用の隠しinput\nconst fileInputRef=useRef(null);// ファイル選択ダイアログを開く\nconst openFileDialog=()=>{if(fileInputRef.current){fileInputRef.current.click();}};return/*#__PURE__*/_jsxs(\"div\",{className:`min-h-screen ${colors.background} flex flex-col items-center py-8 px-4 bg-gradient-to-r ${currentPattern.className}`,onMouseLeave:()=>setIsMouseDown(false),children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"Harmonia Grid\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"\\u30EA\\u30E9\\u30C3\\u30AF\\u30B9\\u3059\\u308B\\u305F\\u3081\\u306E\\u97F3\\u697D\\u30D1\\u30BF\\u30FC\\u30F3\\u3092\\u63CF\\u304D\\u307E\\u3057\\u3087\\u3046\"}),/*#__PURE__*/_jsx(\"div\",{className:`${colors.gridBackground} rounded-lg shadow-lg p-1 mb-6 overflow-auto mx-auto`,style:{width:'fit-content',maxWidth:'100%'},onTouchMove:handleTouchMove,children:/*#__PURE__*/_jsx(\"div\",{className:\"grid-container\",children:grid.map((row,rowIndex)=>/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:row.map((cell,colIndex)=>{// サイズをTailwindクラスではなく、スタイルで直接指定\nreturn/*#__PURE__*/_jsx(\"div\",{className:`\n                      border border-gray-100 cursor-pointer transition-all duration-200\n                      ${cell?instruments.find(i=>i.id===selectedInstrument).color:'bg-gray-50'}\n                      ${colIndex===currentColumn?colors.playbackIndicator:''}\n                      ${rowIndex%2===0?'opacity-90':'opacity-100'}\n                    `,style:{width:'30px',height:'30px',minWidth:'30px'},onMouseDown:()=>handleMouseDown(rowIndex,colIndex),onMouseOver:()=>handleMouseOver(rowIndex,colIndex),onTouchStart:e=>handleTouchStart(e,rowIndex,colIndex),children:cell&&/*#__PURE__*/_jsx(\"div\",{className:`rounded-full ${instruments.find(i=>i.id===selectedInstrument).dotColor} opacity-70 m-auto`,style:{width:'10px',height:'10px'}})},`cell-${rowIndex}-${colIndex}`);})},`row-${rowIndex}`))})}),/*#__PURE__*/_jsx(\"div\",{className:`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto mb-4`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center items-center gap-2 sm:gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{className:`${isPlaying?colors.pauseButton:colors.playButton} px-3 py-1.5 sm:px-4 sm:py-2 rounded-md flex items-center gap-1 sm:gap-2 text-sm sm:text-base`,onClick:togglePlayback,children:isPlaying?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Pause,{size:16}),\" \\u505C\\u6B62\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Play,{size:16}),\" \\u518D\\u751F\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:\"\\u901F\\u3055\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 sm:gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`,onClick:()=>setPlaybackSpeed(Math.max(0.5,playbackSpeed-0.25)),children:\"-\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs sm:text-sm w-12 sm:w-16 text-center\",children:[playbackSpeed.toFixed(2),\"x\"]}),/*#__PURE__*/_jsx(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`,onClick:()=>setPlaybackSpeed(Math.min(2.0,playbackSpeed+0.25)),children:\"+\"})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-between items-center gap-2 sm:gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-1 sm:gap-2\",children:[/*#__PURE__*/_jsx(Volume2,{size:16,className:\"text-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"0\",max:\"1\",step:\"0.1\",value:volume,onChange:e=>setVolume(parseFloat(e.target.value)),className:\"w-16 sm:w-24\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs sm:text-sm\",children:\"\\u97F3\\u91CF\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-1 sm:gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md flex items-center gap-1 text-xs sm:text-sm`,onClick:generateRandomPattern,children:[/*#__PURE__*/_jsx(RefreshCw,{size:14}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden xs:inline\",children:\"\\u30E9\\u30F3\\u30C0\\u30E0\"})]}),/*#__PURE__*/_jsx(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md text-xs sm:text-sm`,onClick:clearGrid,children:\"\\u30AF\\u30EA\\u30A2\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 sm:mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:\"\\u697D\\u5668\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 sm:gap-2\",children:instruments.map(instrument=>/*#__PURE__*/_jsx(\"button\",{className:`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${selectedInstrument===instrument.id?colors.button:colors.buttonSecondary}`,onClick:()=>setSelectedInstrument(instrument.id),children:instrument.name},instrument.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 sm:mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:\"\\u80CC\\u666F\\u30D1\\u30BF\\u30FC\\u30F3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 sm:gap-2\",children:backgroundPatterns.map(pattern=>/*#__PURE__*/_jsx(\"button\",{className:`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${currentPattern.id===pattern.id?colors.button:colors.buttonSecondary}`,onClick:()=>changeBackgroundPattern(pattern),children:pattern.name},pattern.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 sm:mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mb-1\",children:\"\\u30B3\\u30F3\\u30DD\\u30B8\\u30B7\\u30E7\\u30F3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1 sm:gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`,onClick:saveComposition,children:[/*#__PURE__*/_jsx(Save,{size:14}),\"\\u4FDD\\u5B58\"]}),/*#__PURE__*/_jsxs(\"button\",{className:`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`,onClick:openFileDialog,children:[/*#__PURE__*/_jsx(Upload,{size:14}),\"\\u8AAD\\u307F\\u8FBC\\u307F\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,className:\"hidden\",accept:\".json\",onChange:loadComposition})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 sm:mt-8 text-gray-600 text-xs sm:text-sm max-w-md mx-auto text-center px-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u30DE\\u30B9\\u76EE\\u3092\\u30AF\\u30EA\\u30C3\\u30AF\\uFF06\\u30C9\\u30E9\\u30C3\\u30B0\\u3067\\u97F3\\u7B26\\u3092\\u914D\\u7F6E\\u3067\\u304D\\u307E\\u3059\\u3002\\u97F3\\u7B26\\u3092\\u7F6E\\u304F\\u3068\\u540C\\u6642\\u306B\\u97F3\\u304C\\u9CF4\\u308A\\u307E\\u3059\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 sm:mt-2\",children:\"\\u30EA\\u30E9\\u30C3\\u30AF\\u30B9\\u3059\\u308B\\u305F\\u3081\\u306E\\u30DA\\u30F3\\u30BF\\u30C8\\u30CB\\u30C3\\u30AF\\u30B9\\u30B1\\u30FC\\u30EB\\u3092\\u4F7F\\u7528\\u3057\\u3066\\u3044\\u308B\\u306E\\u3067\\u3001\\u3069\\u306E\\u7D44\\u307F\\u5408\\u308F\\u305B\\u3082\\u5FC3\\u5730\\u3088\\u304F\\u97FF\\u304D\\u307E\\u3059\\u3002\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 sm:mt-2\",children:\"\\u518D\\u751F\\u30DC\\u30BF\\u30F3\\u3092\\u62BC\\u3059\\u3068\\u3001\\u5DE6\\u304B\\u3089\\u53F3\\u3078\\u3068\\u9806\\u756A\\u306B\\u97F3\\u304C\\u9CF4\\u308A\\u307E\\u3059\\u3002\\u4FDD\\u5B58\\u30DC\\u30BF\\u30F3\\u3067\\u304A\\u6C17\\u306B\\u5165\\u308A\\u306E\\u66F2\\u3092\\u4FDD\\u5B58\\u3059\\u308B\\u3053\\u3068\\u3082\\u3067\\u304D\\u307E\\u3059\\u3002\"})]})]});};export default CalmComposer;","map":{"version":3,"names":["React","useState","useEffect","useRef","Volume2","RefreshCw","Play","Pause","Save","Upload","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","CalmComposer","gridSize","setGridSize","rows","cols","grid","setGrid","selectedInstrument","setSelectedInstrument","volume","setVolume","isPlaying","setIsPlaying","playbackSpeed","setPlaybackSpeed","currentColumn","setCurrentColumn","playbackRef","isMouseDown","setIsMouseDown","isAddMode","setIsAddMode","lastCell","setLastCell","row","col","audioContextRef","pentatonicScale","reverse","colors","background","gridBackground","hoveredCell","playbackIndicator","controls","button","buttonSecondary","playButton","pauseButton","instruments","id","name","type","color","dotColor","backgroundPatterns","className","currentPattern","setCurrentPattern","newGrid","Array","fill","map","current","window","AudioContext","webkitAudioContext","state","close","handleGlobalMouseUp","addEventListener","removeEventListener","column","playColumn","playNote","speed","setInterval","clearInterval","handleMouseDown","resume","cellValue","handleMouseOver","time","arguments","length","undefined","currentTime","oscillator","createOscillator","gainNode","createGain","instrumentSettings","gain","setValueAtTime","exponentialRampToValueAtTime","linearRampToValueAtTime","harmonicOsc","harmonicGain","frequency","connect","destination","start","stop","clearGrid","generateRandomPattern","notesInColumn","Math","floor","random","i","togglePlayback","stopPlayback","changeBackgroundPattern","pattern","saveComposition","compositionData","instrument","version","jsonData","JSON","stringify","blob","Blob","url","URL","createObjectURL","a","document","createElement","href","download","Date","toISOString","slice","body","appendChild","click","removeChild","revokeObjectURL","alert","e","console","error","loadComposition","event","file","target","files","reader","FileReader","onload","parse","result","Error","bgPattern","find","p","parseError","readAsText","value","handleTouchStart","preventDefault","handleTouchMove","touch","touches","gridElement","currentTarget","rect","getBoundingClientRect","touchX","clientX","left","touchY","clientY","top","cellWidth","width","cellHeight","height","fileInputRef","openFileDialog","onMouseLeave","children","style","maxWidth","onTouchMove","rowIndex","cell","colIndex","minWidth","onMouseDown","onMouseOver","onTouchStart","onClick","size","max","toFixed","min","step","onChange","parseFloat","ref","accept"],"sources":["/Users/ayakos/Documents/GitHub/Harmonia-Grid/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Volume2, RefreshCw, Play, Pause, Save, Upload } from 'lucide-react';\n\nconst CalmComposer = () => {\n  // グリッドの設定\n  const [gridSize, setGridSize] = useState({ rows: 13, cols: 16 });\n  const [grid, setGrid] = useState([]);\n  const [selectedInstrument, setSelectedInstrument] = useState('synth');\n  const [volume, setVolume] = useState(0.5);\n  \n  // 再生関連の状態\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playbackSpeed, setPlaybackSpeed] = useState(1.0);\n  const [currentColumn, setCurrentColumn] = useState(-1);\n  const playbackRef = useRef(null);\n  \n  // マウスの状態を追跡\n  const [isMouseDown, setIsMouseDown] = useState(false);\n  const [isAddMode, setIsAddMode] = useState(true); // マウスダウン時の最初のセルの状態で追加か削除かを決定\n  const [lastCell, setLastCell] = useState({ row: -1, col: -1 });\n  \n  // 音楽再生用の参照\n  const audioContextRef = useRef(null);\n  \n  // スケールの設定（ペンタトニックスケール - リラクゼーション向き）\n  const pentatonicScale = [\n    523.25, // C5\n    587.33, // D5\n    659.25, // E5\n    783.99, // G5\n    880.00, // A5\n    1046.50, // C6\n    1174.66, // D6\n    1318.51, // E6\n    1567.98, // G6\n    1760.00, // A6\n    2093.00, // C7\n    2349.32, // D7\n    2637.02  // E7\n  ].reverse(); // 上から下へ表示するために反転\n  \n  // 色のパレット（リラックス効果のある色合い）\n  const colors = {\n    background: 'bg-gradient-to-r from-blue-50 to-purple-50',\n    gridBackground: 'bg-white',\n    hoveredCell: 'bg-indigo-200',\n    playbackIndicator: 'bg-blue-200 opacity-30',\n    controls: 'bg-white',\n    button: 'bg-indigo-500 hover:bg-indigo-600 text-white',\n    buttonSecondary: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\n    playButton: 'bg-green-500 hover:bg-green-600 text-white',\n    pauseButton: 'bg-amber-500 hover:bg-amber-600 text-white'\n  };\n  \n  // 楽器の音色設定と色\n  const instruments = [\n    { id: 'synth', name: 'シンセ', type: 'sine', color: 'bg-indigo-400', dotColor: 'bg-white' },\n    { id: 'bell', name: 'ベル', type: 'triangle', color: 'bg-teal-400', dotColor: 'bg-white' },\n    { id: 'soft', name: 'ソフト', type: 'sine', color: 'bg-purple-400', dotColor: 'bg-white' },\n    { id: 'warm', name: '温かみ', type: 'sine', color: 'bg-amber-400', dotColor: 'bg-white' }\n  ];\n  \n  // 背景パターン\n  const backgroundPatterns = [\n    { id: 'waves', name: '波', className: 'from-blue-50 to-purple-50' },\n    { id: 'sunset', name: '夕暮れ', className: 'from-orange-50 to-pink-50' },\n    { id: 'forest', name: '森', className: 'from-green-50 to-teal-50' },\n    { id: 'night', name: '夜', className: 'from-indigo-50 to-purple-100' }\n  ];\n  \n  const [currentPattern, setCurrentPattern] = useState(backgroundPatterns[0]);\n  \n  // グリッドの初期化\n  useEffect(() => {\n    // 初期グリッドを作成（すべてのセルをfalseに）\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n    \n    // Web Audio APIのセットアップ\n    audioContextRef.current = new (window.AudioContext || window.webkitAudioContext)();\n    \n    return () => {\n      // クリーンアップ\n      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n        audioContextRef.current.close();\n      }\n    };\n  }, []);\n  \n  // グローバルなマウスイベントの設定\n  useEffect(() => {\n    const handleGlobalMouseUp = () => {\n      setIsMouseDown(false);\n      setLastCell({ row: -1, col: -1 });\n    };\n    \n    window.addEventListener('mouseup', handleGlobalMouseUp);\n    window.addEventListener('mouseleave', handleGlobalMouseUp);\n    \n    return () => {\n      window.removeEventListener('mouseup', handleGlobalMouseUp);\n      window.removeEventListener('mouseleave', handleGlobalMouseUp);\n    };\n  }, []);\n  \n  // 再生機能の管理\n  useEffect(() => {\n    if (isPlaying) {\n      // 再生開始\n      let column = currentColumn < 0 ? 0 : currentColumn;\n      \n      const playColumn = () => {\n        // 現在の列のアクティブなセルを鳴らす\n        for (let row = 0; row < gridSize.rows; row++) {\n          if (grid[row][column]) {\n            playNote(row);\n          }\n        }\n        \n        // 次の列に進む\n        column = (column + 1) % gridSize.cols;\n        setCurrentColumn(column);\n      };\n      \n      // 再生速度に応じた間隔でタイマーをセット\n      const speed = 300 / playbackSpeed; // ベース速度を300ミリ秒に設定\n      playbackRef.current = setInterval(playColumn, speed);\n      \n      return () => {\n        clearInterval(playbackRef.current);\n      };\n    } else {\n      // 再生終了時の処理\n      if (playbackRef.current) {\n        clearInterval(playbackRef.current);\n      }\n    }\n  }, [isPlaying, grid, playbackSpeed]);\n  \n  // マウスダウンの処理\n  const handleMouseDown = (row, col) => {\n    // Safariのための対応\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    \n    setIsMouseDown(true);\n    setLastCell({ row, col });\n    \n    // 現在のセルの状態に基づいて、追加モードか削除モードかを設定\n    const cellValue = grid[row][col];\n    setIsAddMode(!cellValue);\n    \n    // セルの状態を更新\n    const newGrid = [...grid];\n    newGrid[row][col] = !cellValue;\n    setGrid(newGrid);\n    \n    // 追加モードのときのみ音を鳴らす\n    if (!cellValue) {\n      playNote(row);\n    }\n  };\n  \n  // マウスオーバーの処理（ドラッグ時）\n  const handleMouseOver = (row, col) => {\n    if (!isMouseDown || (lastCell.row === row && lastCell.col === col)) {\n      return;\n    }\n    \n    setLastCell({ row, col });\n    \n    const newGrid = [...grid];\n    // 追加モードか削除モードかに基づいてセルを更新\n    newGrid[row][col] = isAddMode;\n    setGrid(newGrid);\n    \n    // 追加モードのときのみ音を鳴らす\n    if (isAddMode) {\n      playNote(row);\n    }\n  };\n  \n  // 音を鳴らす関数\n  const playNote = (row, time = audioContextRef.current.currentTime) => {\n    if (!audioContextRef.current) return;\n    \n    const oscillator = audioContextRef.current.createOscillator();\n    const gainNode = audioContextRef.current.createGain();\n    \n    // 楽器タイプに基づいた設定\n    let instrumentSettings;\n    switch (selectedInstrument) {\n      case 'bell':\n        oscillator.type = 'triangle';\n        // ベル風の音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.01, time + 1.5);\n        break;\n      case 'soft':\n        oscillator.type = 'sine';\n        // ソフトな音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume * 0.7, time + 0.1);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 2.0);\n        break;\n      case 'warm':\n        oscillator.type = 'sine';\n        // 温かみのある音にするためのエンベロープ設定\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(volume, time + 0.05);\n        gainNode.gain.exponentialRampToValueAtTime(volume * 0.6, time + 0.2);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.8);\n        \n        // 温かみを出すために倍音を追加\n        const harmonicOsc = audioContextRef.current.createOscillator();\n        const harmonicGain = audioContextRef.current.createGain();\n        harmonicOsc.frequency.setValueAtTime(pentatonicScale[row] * 2, time);\n        harmonicGain.gain.setValueAtTime(volume * 0.2, time);\n        harmonicGain.gain.exponentialRampToValueAtTime(0.001, time + 1.5);\n        harmonicOsc.connect(harmonicGain);\n        harmonicGain.connect(audioContextRef.current.destination);\n        harmonicOsc.start(time);\n        harmonicOsc.stop(time + 1.8);\n        break;\n      default: // synth\n        oscillator.type = 'sine';\n        gainNode.gain.setValueAtTime(volume, time);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + 1.0);\n    }\n    \n    oscillator.frequency.setValueAtTime(pentatonicScale[row], time);\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContextRef.current.destination);\n    \n    oscillator.start(time);\n    oscillator.stop(time + 2.0); // 2秒後に音を止める\n  };\n  \n  // グリッドをクリア\n  const clearGrid = () => {\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    setGrid(newGrid);\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n\n  // ランダムなパターンを生成（リラクゼーション向きのパターン）\n  const generateRandomPattern = () => {\n    const newGrid = Array(gridSize.rows).fill()\n      .map(() => Array(gridSize.cols).fill(false));\n    \n    // 適度な密度でランダムに配置（約15%のセルをアクティブに）\n    for (let col = 0; col < gridSize.cols; col++) {\n      // 各列に1〜3個の音符を配置\n      const notesInColumn = Math.floor(Math.random() * 3) + 1;\n      for (let i = 0; i < notesInColumn; i++) {\n        // リラクゼーション向きにするため、低音と高音を避けて中音域を多めに\n        let row;\n        if (Math.random() < 0.7) {\n          // 70%の確率で中音域（4-9）\n          row = Math.floor(Math.random() * 6) + 4;\n        } else {\n          // 30%の確率で全域\n          row = Math.floor(Math.random() * gridSize.rows);\n        }\n        newGrid[row][col] = true;\n      }\n    }\n    \n    setGrid(newGrid);\n  };\n  \n  // 再生/停止の切り替え\n  const togglePlayback = () => {\n    if (audioContextRef.current.state === 'suspended') {\n      audioContextRef.current.resume();\n    }\n    setIsPlaying(!isPlaying);\n  };\n  \n  // 再生を停止し、先頭に戻る\n  const stopPlayback = () => {\n    setIsPlaying(false);\n    setCurrentColumn(-1);\n  };\n  \n  // 背景パターンの変更\n  const changeBackgroundPattern = (pattern) => {\n    setCurrentPattern(pattern);\n  };\n  \n  // コンポジションの保存\n  const saveComposition = () => {\n    try {\n      // コンポジションデータの作成\n      const compositionData = {\n        grid,\n        instrument: selectedInstrument,\n        background: currentPattern.id,\n        version: '1.1'\n      };\n      \n      // JSON形式で保存\n      const jsonData = JSON.stringify(compositionData);\n      const blob = new Blob([jsonData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      \n      // ダウンロードリンクの作成と実行\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `calm-composition-${new Date().toISOString().slice(0, 10)}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n      \n      alert('コンポジションを保存しました！');\n    } catch (e) {\n      console.error('保存エラー:', e);\n      alert('保存に失敗しました。');\n    }\n  };\n  \n  // コンポジションのロード\n  const loadComposition = (event) => {\n    try {\n      const file = event.target.files[0];\n      if (!file) return;\n      \n      const reader = new FileReader();\n      reader.onload = (e) => {\n        try {\n          const compositionData = JSON.parse(e.target.result);\n          \n          // データの検証\n          if (!compositionData.grid || !compositionData.instrument) {\n            throw new Error('無効なコンポジションデータです');\n          }\n          \n          // データのロード\n          setGrid(compositionData.grid);\n          setSelectedInstrument(compositionData.instrument);\n          \n          // 背景設定がある場合はそれも読み込み\n          if (compositionData.background) {\n            const bgPattern = backgroundPatterns.find(p => p.id === compositionData.background);\n            if (bgPattern) {\n              setCurrentPattern(bgPattern);\n            }\n          }\n          \n          alert('コンポジションをロードしました！');\n        } catch (parseError) {\n          console.error('解析エラー:', parseError);\n          alert('無効なコンポジションファイルです。');\n        }\n      };\n      reader.readAsText(file);\n    } catch (e) {\n      console.error('ロードエラー:', e);\n      alert('読み込みに失敗しました。');\n    }\n    \n    // input要素の値をリセット（同じファイルを連続で選択できるように）\n    event.target.value = null;\n  };\n  \n  // タッチイベントの処理\n  const handleTouchStart = (e, row, col) => {\n    e.preventDefault(); // デフォルトのスクロールを防止\n    handleMouseDown(row, col);\n  };\n  \n  const handleTouchMove = (e) => {\n    e.preventDefault();\n    if (!isMouseDown) return;\n    \n    // タッチイベントから座標を取得\n    const touch = e.touches[0];\n    const gridElement = e.currentTarget;\n    const rect = gridElement.getBoundingClientRect();\n    \n    // タッチ位置からグリッド上の位置を計算\n    const touchX = touch.clientX - rect.left;\n    const touchY = touch.clientY - rect.top;\n    \n    // グリッドのセルサイズ（推定）\n    const cellWidth = rect.width / gridSize.cols;\n    const cellHeight = rect.height / gridSize.rows;\n    \n    // タッチしたセルの計算\n    const col = Math.floor(touchX / cellWidth);\n    const row = Math.floor(touchY / cellHeight);\n    \n    // グリッド範囲内かチェック\n    if (row >= 0 && row < gridSize.rows && col >= 0 && col < gridSize.cols) {\n      handleMouseOver(row, col);\n    }\n  };\n  \n  // ファイル選択用の隠しinput\n  const fileInputRef = useRef(null);\n  \n  // ファイル選択ダイアログを開く\n  const openFileDialog = () => {\n    if (fileInputRef.current) {\n      fileInputRef.current.click();\n    }\n  };\n  \n  return (\n    <div \n      className={`min-h-screen ${colors.background} flex flex-col items-center py-8 px-4 bg-gradient-to-r ${currentPattern.className}`}\n      onMouseLeave={() => setIsMouseDown(false)}\n    >\n      <h1 className=\"text-3xl font-bold text-gray-800 mb-2\">Harmonia Grid</h1>\n      <p className=\"text-gray-600 mb-6\">リラックスするための音楽パターンを描きましょう</p>\n      \n      {/* メインの音楽グリッド - レスポンシブ対応 */}\n      <div \n        className={`${colors.gridBackground} rounded-lg shadow-lg p-1 mb-6 overflow-auto mx-auto`}\n        style={{ \n          width: 'fit-content', \n          maxWidth: '100%'\n        }}\n        onTouchMove={handleTouchMove}\n      >\n        <div className=\"grid-container\">\n          {grid.map((row, rowIndex) => (\n            <div key={`row-${rowIndex}`} className=\"flex\">\n              {row.map((cell, colIndex) => {\n                // サイズをTailwindクラスではなく、スタイルで直接指定\n                return (\n                  <div\n                    key={`cell-${rowIndex}-${colIndex}`}\n                    className={`\n                      border border-gray-100 cursor-pointer transition-all duration-200\n                      ${cell ? instruments.find(i => i.id === selectedInstrument).color : 'bg-gray-50'}\n                      ${colIndex === currentColumn ? colors.playbackIndicator : ''}\n                      ${rowIndex % 2 === 0 ? 'opacity-90' : 'opacity-100'}\n                    `}\n                    style={{\n                      width: '30px',\n                      height: '30px',\n                      minWidth: '30px',\n                    }}\n                    onMouseDown={() => handleMouseDown(rowIndex, colIndex)}\n                    onMouseOver={() => handleMouseOver(rowIndex, colIndex)}\n                    onTouchStart={(e) => handleTouchStart(e, rowIndex, colIndex)}\n                  >\n                    {cell && \n                      <div \n                        className={`rounded-full ${instruments.find(i => i.id === selectedInstrument).dotColor} opacity-70 m-auto`}\n                        style={{ width: '10px', height: '10px' }}\n                      ></div>\n                    }\n                  </div>\n                );\n              })}\n            </div>\n          ))}\n        </div>\n      </div>\n      \n      {/* 再生コントロール - レスポンシブ対応 */}\n      <div className={`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto mb-4`}>\n        <div className=\"flex flex-wrap justify-center items-center gap-2 sm:gap-4\">\n          {/* 再生/停止ボタン */}\n          <button \n            className={`${isPlaying ? colors.pauseButton : colors.playButton} px-3 py-1.5 sm:px-4 sm:py-2 rounded-md flex items-center gap-1 sm:gap-2 text-sm sm:text-base`}\n            onClick={togglePlayback}\n          >\n            {isPlaying ? <><Pause size={16} /> 停止</> : <><Play size={16} /> 再生</>}\n          </button>\n          \n          {/* 再生速度 */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"text-xs text-gray-500 mb-1\">速さ</div>\n            <div className=\"flex items-center gap-1 sm:gap-2\">\n              <button \n                className={`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`}\n                onClick={() => setPlaybackSpeed(Math.max(0.5, playbackSpeed - 0.25))}\n              >\n                -\n              </button>\n              <span className=\"text-xs sm:text-sm w-12 sm:w-16 text-center\">{playbackSpeed.toFixed(2)}x</span>\n              <button \n                className={`${colors.buttonSecondary} px-2 py-1 rounded-md text-xs`}\n                onClick={() => setPlaybackSpeed(Math.min(2.0, playbackSpeed + 0.25))}\n              >\n                +\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      {/* コントロールパネル - レスポンシブ対応 */}\n      <div className={`${colors.controls} rounded-lg shadow-md p-3 sm:p-4 w-full max-w-md mx-auto`}>\n        <div className=\"flex flex-wrap justify-between items-center gap-2 sm:gap-4\">\n          {/* 音量コントロール */}\n          <div className=\"flex items-center gap-1 sm:gap-2\">\n            <Volume2 size={16} className=\"text-gray-500\" />\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.1\"\n              value={volume}\n              onChange={(e) => setVolume(parseFloat(e.target.value))}\n              className=\"w-16 sm:w-24\"\n            />\n            <span className=\"text-xs sm:text-sm\">音量</span>\n          </div>\n          \n          {/* ボタン群をレスポンシブに */}\n          <div className=\"flex gap-1 sm:gap-2\">\n            {/* パターン生成ボタン */}\n            <button \n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md flex items-center gap-1 text-xs sm:text-sm`}\n              onClick={generateRandomPattern}\n            >\n              <RefreshCw size={14} />\n              <span className=\"hidden xs:inline\">ランダム</span>\n            </button>\n            \n            {/* クリアボタン */}\n            <button \n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-2 rounded-md text-xs sm:text-sm`}\n              onClick={clearGrid}\n            >\n              クリア\n            </button>\n          </div>\n        </div>\n        \n        {/* 楽器選択 - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">楽器</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            {instruments.map(instrument => (\n              <button\n                key={instrument.id}\n                className={`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${selectedInstrument === instrument.id ? colors.button : colors.buttonSecondary}`}\n                onClick={() => setSelectedInstrument(instrument.id)}\n              >\n                {instrument.name}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        {/* 背景パターン選択 - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">背景パターン</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            {backgroundPatterns.map(pattern => (\n              <button\n                key={pattern.id}\n                className={`px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md ${currentPattern.id === pattern.id ? colors.button : colors.buttonSecondary}`}\n                onClick={() => changeBackgroundPattern(pattern)}\n              >\n                {pattern.name}\n              </button>\n            ))}\n          </div>\n        </div>\n        \n        {/* 保存とロード - レスポンシブ対応 */}\n        <div className=\"mt-3 sm:mt-4\">\n          <div className=\"text-xs text-gray-500 mb-1\">コンポジション</div>\n          <div className=\"flex flex-wrap gap-1 sm:gap-2\">\n            <button\n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`}\n              onClick={saveComposition}\n            >\n              <Save size={14} />\n              保存\n            </button>\n            <button\n              className={`${colors.buttonSecondary} px-2 py-1 sm:px-3 sm:py-1 text-xs sm:text-sm rounded-md flex items-center gap-1`}\n              onClick={openFileDialog}\n            >\n              <Upload size={14} />\n              読み込み\n            </button>\n            <input\n              type=\"file\"\n              ref={fileInputRef}\n              className=\"hidden\"\n              accept=\".json\"\n              onChange={loadComposition}\n            />\n          </div>\n        </div>\n      </div>\n      \n      {/* 使い方ガイド - レスポンシブ対応 */}\n      <div className=\"mt-6 sm:mt-8 text-gray-600 text-xs sm:text-sm max-w-md mx-auto text-center px-2\">\n        <p>マス目をクリック＆ドラッグで音符を配置できます。音符を置くと同時に音が鳴ります。</p>\n        <p className=\"mt-1 sm:mt-2\">リラックスするためのペンタトニックスケールを使用しているので、どの組み合わせも心地よく響きます。</p>\n        <p className=\"mt-1 sm:mt-2\">再生ボタンを押すと、左から右へと順番に音が鳴ります。保存ボタンでお気に入りの曲を保存することもできます。</p>\n      </div>\n    </div>\n  );\n};\n\nexport default CalmComposer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}